% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/remove_collinearity.R
\name{process_collinearity_}
\alias{process_collinearity_}
\title{Detect and Optionally Remove Multicollinearity Based on VIF}
\usage{
process_collinearity_(data, threshold = 5, remove = FALSE)
}
\arguments{
\item{data}{A data frame containing only numeric columns. Non-numeric columns will trigger an error.}

\item{threshold}{A numeric value greater than 1. VIF values above this threshold indicate multicollinearity.
If \code{remove = TRUE}, variables with the highest VIF above this threshold will be removed iteratively.
Default is 5.}

\item{remove}{Logical. If \code{TRUE}, variables with VIF above the threshold will be iteratively removed.
If \code{FALSE}, only VIF values will be returned without modifying the input data. Default is \code{FALSE}.}
}
\value{
A list with the following components:
\describe{
  \item{data}{The cleaned data frame with collinear variables removed (if \code{remove = TRUE}).}
  \item{vif}{A named numeric vector containing VIF values for the remaining variables.}
  \item{removed}{A character vector of variable names that were removed due to high multicollinearity. Empty if \code{remove = FALSE}.}
}
}
\description{
This function calculates the Variance Inflation Factor (VIF) for each numeric column
in a data frame to assess multicollinearity among predictors. Optionally, it can iteratively
remove the most collinear variables based on a user-defined threshold.
}
\details{
The function uses the definition of VIF as \eqn{1 / (1 - R^2)} where \eqn{R^2} is obtained
by regressing each variable on all others. A VIF of 1 indicates no multicollinearity;
higher values indicate increasing levels of collinearity.

Perfect or near-perfect multicollinearity (i.e., \eqn{R^2} close to 1) will trigger a warning
and the VIF is set to \code{Inf}. If a model fails to fit (e.g., due to singularities), the VIF
is set to \code{NA} and a warning is issued.
}
\section{Warnings}{

\itemize{
  \item If the model for a variable fails to fit, a warning is shown and its VIF is set to \code{NA}.
  \item If perfect or near-perfect multicollinearity is detected, a warning is issued and VIF is set to \code{Inf}.
  \item If fewer than two variables remain after removal, a warning is shown.
}
}

\examples{
# Create a data frame with collinear variables
set.seed(123)
df <- data.frame(
  x1 = rnorm(100)
)
df$x2 <- df$x1 + rnorm(100, sd = 0.01)  # Highly collinear with x1
df$x3 <- rnorm(100)  # Not collinear

# Process collinearity with removal
result <- process_collinearity_(df, threshold = 5, remove = TRUE)
result$vif         # View VIF values
result$removed     # Variables removed due to high VIF

# Only compute VIFs without removing variables
process_collinearity_(df, threshold = 5, remove = FALSE)

}
